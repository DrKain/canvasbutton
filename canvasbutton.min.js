function Button(t,e){this.SHID=Math.random().toString(36).substr(2,5),this.debug=!1,__fh483g[this.SHID]={mo:!1},this.vars={},this.killed=!1,this.style={mouseOver:!1,_disabled:!1,_hidden:!1,text:"My Button",x:5,y:5,width:100,height:40,hover:{backgroundColor:"#5d8ea2",textColor:"#333"},radius:5,backgroundColor:"skyblue",borderColor:"black",borderSize:2,fontSize:"12px",fontFamily:"Arial",textColor:"#333",disabled:{}},this.apply(t,e),this.onClicked=function(){}}var __fh483g={},__893rhj={off:{top:0,left:0}},__mouse={x:0,y:0,down:!1},jsGetOffset=function(t){for(var e=0,s=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,s+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:s,left:e}},jsSetMouseTrack=function(t){__893rhj.off=jsGetOffset(t),window.onresize=function(){__893rhj.off=jsGetOffset(t)},t.onmousemove=function(t){var e=__893rhj.off;__mouse.x=t.pageX-e.left,__mouse.y=t.pageY-e.top},t.onmousedown=function(){__mouse.down=!0},t.onmouseup=function(){__mouse.down=!1},t.onmouseout=function(){__mouse.down=!1}},setMouseTrack=function(t){return"undefined"==typeof t.on?jsSetMouseTrack(t):(window.onresize=function(){__893rhj.off=t.offset()},__893rhj.off=t.offset(),void t.on({mousemove:function(t){var e=__893rhj.off;__mouse.x=t.pageX-e.left,__mouse.y=t.pageY-e.top},mousedown:function(){__mouse.down=!0},mouseup:function(){__mouse.down=!1},touchstart:function(){__mouse.down=!0},touchend:function(){__mouse.down=!1},touchcancel:function(){__mouse.down=!1}}))};Button.prototype.remove=function(){this.killed=!0,delete __fh483g[this.SHID]},Button.prototype.hide=function(){this.style._hidden=!0},Button.prototype.show=function(){this.style._hidden=!1},Button.prototype.disable=function(){this.style._disabled=!0,this.style.mouseOver=!1,delete __fh483g[this.SHID],Object.keys(this.style.disabled).length>0},Button.prototype.enable=function(){this.style._disabled=!1,__fh483g[this.SHID]={mo:!1},Object.keys(this.style.disabled).length>0},Button.prototype.apply=function(t,e){for(var s in e)this.style[s]&&(this.style[s]=e[s]);this.draw(t)},Button.prototype._stringVar=function(t){var e=new RegExp(/\%(.*?)\%/,"g"),s=t.match(e);if(null!==s)for(var o=0;o<s.length;o++){var i=s[o],n=i.replace(/%/gi,"");"undefined"!=typeof this.vars[n]&&(t=t.replace(i,this.vars[n]))}return t},Button.prototype["var"]=function(t,e){return"undefined"==typeof e?this.vars[t]:this.vars[t]=e},Button.prototype.getText=function(){return this.style.text},Button.prototype.setText=function(t){this.style.text=this._stringVar(t)},Button.prototype.opVar=function(t,e){"++"===e&&this.vars[t]++,"--"===e&&this.vars[t]--},Button.prototype.mouseenter=function(){this.debug&&console.log("Button_"+this.SHID+" => Mouse Enter")},Button.prototype.mouseexit=function(){this.debug&&console.log("Button_"+this.SHID+" => Mouse Exit")},Button.prototype.clicked=function(){this.debug&&console.log("Button_"+this.SHID+" was clicked!")},Button.prototype.moveTo=function(t,e){this.style.x=t,this.style.y=e},Button.prototype.setVar=function(t,e){return this.set(t,e)},Button.prototype.getVar=function(t){return this.get(t)},Button.prototype.get=function(t){return"undefined"!=typeof this.vars[t]?this.vars[t]:"undefined"!=typeof this.style[t]?this.style[t]:void 0},Button.prototype.set=function(t,e){return"undefined"!=typeof this.style[t]?console.error("Key is in use"):this.vars[t]=e},Button.prototype.setStyle=function(t,e){return"undefined"!=typeof this.style[t]?this.style[t]=e:!1},Button.prototype.update=function(t,e){if(this.killed!==!0){var s=this.style.mouseOver;this.style._disabled!==!0&&(t.x>=this.style.x&&t.x<=this.style.x+(this.style.width+this.style.borderSize)&&t.y>=this.style.y&&t.y<=this.style.y+(this.style.height+this.style.borderSize)?(this.style.mouseOver=!0,this.style.mouseOver!==s&&this.mouseenter(),__fh483g[this.SHID].mo=!0):(this.style.mouseOver=!1,this.style.mouseOver!==s&&this.mouseexit(),__fh483g[this.SHID].mo=!1),Object.keys(__fh483g).filter(function(t){return __fh483g[t].mo===!0}).length>0?e.canvas.style.cursor="pointer":e.canvas.style.cursor="default",this.style.mouseOver===!0&&t.down===!0&&(this.clicked(),t.down=!1)),this.style._hidden!==!0&&this.draw(e)}},Button.prototype.draw=function(t){t.lineWidth=this.style.borderSize,t.strokeStyle=this.style.borderColor,t.fillStyle=this.style.mouseOver?this.style.hover.backgroundColor:this.style.backgroundColor,t.beginPath(),t.moveTo(this.style.x+this.style.radius,this.style.y),t.lineTo(this.style.x+this.style.width-this.style.radius,this.style.y),t.quadraticCurveTo(this.style.x+this.style.width,this.style.y,this.style.x+this.style.width,this.style.y+this.style.radius),t.lineTo(this.style.x+this.style.width,this.style.y+this.style.height-this.style.radius),t.quadraticCurveTo(this.style.x+this.style.width,this.style.y+this.style.height,this.style.x+this.style.width-this.style.radius,this.style.y+this.style.height),t.lineTo(this.style.x+this.style.radius,this.style.y+this.style.height),t.quadraticCurveTo(this.style.x,this.style.y+this.style.height,this.style.x,this.style.y+this.style.height-this.style.radius),t.lineTo(this.style.x,this.style.y+this.style.radius),t.quadraticCurveTo(this.style.x,this.style.y,this.style.x+this.style.radius,this.style.y),t.closePath(),t.stroke(),t.fill(),t.font=this.style.fontSize+" "+this.style.fontFamily,t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.style.mouseOver?this.style.hover.textColor:this.style.textColor,t.fillText(this.style.text,this.style.x+this.style.width/2,this.style.y+this.style.height/2)};
